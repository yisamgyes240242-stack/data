import streamlit as st

# ìƒí™œ ì—ë„ˆì§€ ê¸°ë°˜ íƒ„ì†Œ ë°°ì¶œ ê³„ì‚°ê¸° (Streamlit ë²„ì „)

emission_factor = {
    "ì „ê¸°": 450,      # g CO2 / ë‹¨ìœ„
    "ë‚œë°©ìœ ": 2660,
    "ë„ì‹œê°€ìŠ¤": 2000,
    "ì§€ì—­ë‚œë°©": 500,
    "LPG": 1500
}

def calculate_emissions(amount, energy_type):
    if energy_type not in emission_factor:
        return None
    return amount * emission_factor[energy_type]

def evaluate_emission(emission):
    if emission < 1000:
        return "ë°°ì¶œëŸ‰ì´ ë§¤ìš° ë‚®ì•„ìš”. ì¢‹ì€ ìˆ˜ì¤€ì´ì—ìš”!"
    elif emission < 5000:
        return "ë³´í†µ ìˆ˜ì¤€ì˜ ë°°ì¶œëŸ‰ì´ì—ìš”."
    elif emission < 20000:
        return "ë°°ì¶œëŸ‰ì´ ì¡°ê¸ˆ ë†’ì€ í¸ì´ì—ìš”. ì ˆì•½ì„ ê³ ë ¤í•´ë„ ì¢‹ì•„ìš”."
    else:
        return "ë°°ì¶œëŸ‰ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. ì‚¬ìš©ëŸ‰ ì¡°ì ˆì´ í•„ìš”í•´ìš”!"

# -------------------- Streamlit UI --------------------

st.title("ğŸŒ± ìƒí™œ ì—ë„ˆì§€ íƒ„ì†Œ ë°°ì¶œ ê³„ì‚°ê¸°")

st.write("ì—ë„ˆì§€ ì¢…ë¥˜ì— ë”°ë¥¸ ì‚¬ìš©ëŸ‰ì„ ì…ë ¥í•˜ë©´ ì˜ˆìƒ íƒ„ì†Œ ë°°ì¶œëŸ‰ì„ ê³„ì‚°í•´ ì¤ë‹ˆë‹¤.")

# ì…ë ¥ ì˜ì—­
col1, col2 = st.columns(2)

with col1:
    energy_type = st.selectbox(
        "ì—ë„ˆì§€ ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”",
        list(emission_factor.keys())
    )

with col2:
    amount = st.number_input(
        "ì‚¬ìš©ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: kWh, L, mÂ³ ë“±)",
        min_value=0.0,
        step=1.0
    )

if st.button("ë°°ì¶œëŸ‰ ê³„ì‚°í•˜ê¸°"):
    if amount <= 0:
        st.warning("ì‚¬ìš©ëŸ‰ì„ 0ë³´ë‹¤ í° ê°’ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.")
    else:
        emission = calculate_emissions(amount, energy_type)
        st.subheader("ğŸ“Š ê³„ì‚° ê²°ê³¼")
        st.write(f"**{energy_type} {amount} ë‹¨ìœ„ ì‚¬ìš© ì‹œ íƒ„ì†Œ ë°°ì¶œëŸ‰:**")
        st.metric(label="íƒ„ì†Œ ë°°ì¶œëŸ‰", value=f"{emission:,.0f} g COâ‚‚")
        st.write("**í‰ê°€:**", evaluate_emission(emission))

        st.markdown("---")
        st.subheader("ğŸŒ ì €íƒ„ì†Œ ìƒí™œ ì‹¤ì²œ ë°©ë²•")

        st.markdown(
            """
**1. ëƒ‰Â·ë‚œë°© ì˜¨ë„ ì ì • ìˆ˜ì¤€ ìœ ì§€í•˜ê¸°**  
- ì—¬ë¦„: **26â„ƒ ì´ìƒ**, ê²¨ìš¸: **20â„ƒ ì´í•˜**  
- ëƒ‰ë‚œë°© ì˜¨ë„ë¥¼ 1â„ƒ ì¡°ì •í•˜ë©´  
  â†’ **ì—°ê°„ ì•½ 110kg COâ‚‚ ê°ì†Œ**,  
  â†’ **ëƒ‰ë‚œë°© ë¹„ìš© ì•½ 34,000ì› ì ˆì•½ ê°€ëŠ¥**

**2. ì ˆì „í˜• ì „ë“±ìœ¼ë¡œ êµì²´í•˜ê¸°**  
- ë°±ì—´ë“±(60W) â†’ í˜•ê´‘ë“±(24W) êµì²´ ì‹œ  
  â†’ ì—°ê°„ **ì•½ 17kg COâ‚‚ ê°ì†Œ**  
- ì ˆì „í˜• í˜•ê´‘ë“±ì€  
  â†’ ë°±ì—´ë“±ë³´ë‹¤ **ìˆ˜ëª… ì•½ 8ë°°**,  
  â†’ **ì „ë ¥ ì†Œë¹„ë„ ë” ì ìŒ**

**3. ê±·ê¸°Â·ìì „ê±°Â·ëŒ€ì¤‘êµí†µ ìƒí™œí™”í•˜ê¸°**  
- ìŠ¹ìš©ì°¨ ì´ìš©ì„ **ì¼ì£¼ì¼ì— í•˜ë£¨ë§Œ ì¤„ì—¬ë„**  
  â†’ ì—°ê°„ **ì•½ 445kg COâ‚‚ ê°ì†Œ**
"""
        )
